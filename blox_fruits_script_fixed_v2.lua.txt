local Show_Button = true
local Button_Icon = "rbxassetid://79350762561675"
local Button_Transparency = 0.1

-- ui 
local ScreenGui = Instance.new("ScreenGui")
local ImageButton = Instance.new("ImageButton")
local UICorner = Instance.new("UICorner")
local UIStroke = Instance.new("UIStroke")
local UIGradient = Instance.new("UIGradient")
local UIScale = Instance.new("UIScale")
ScreenGui.Name = "SpaceHubButton"
ScreenGui.Parent = game.CoreGui
ScreenGui.ZIndexBehavior = Enum.ZIndexBehavior.Sibling
ImageButton.Parent = ScreenGui
ImageButton.BackgroundColor3 = Color3.fromRGB(255, 255, 255)
ImageButton.BackgroundTransparency = Button_Transparency
ImageButton.BorderSizePixel = 0
ImageButton.Position = UDim2.new(0.05, 0, 0.1, 0)
ImageButton.Size = UDim2.new(0, 70, 0, 70)
ImageButton.Image = Button_Icon
ImageButton.Draggable = true
ImageButton.ImageTransparency = 0
UICorner.CornerRadius = UDim.new(0, 20)
UICorner.Parent = ImageButton
UIStroke.Parent = ImageButton
UIStroke.Color = Color3.fromRGB(0, 150, 255)
UIStroke.Thickness = 4
UIStroke.ApplyStrokeMode = Enum.ApplyStrokeMode.Border
UIGradient.Parent = ImageButton
UIGradient.Color = ColorSequence.new{
    ColorSequenceKeypoint.new(0, Color3.fromRGB(135, 206, 250)),
    ColorSequenceKeypoint.new(1, Color3.fromRGB(70, 130, 180))
}
UIGradient.Rotation = 45

UIScale.Parent = ImageButton
UIScale.Scale = 1

-- animations
local function animateButton()
    local tween1 = game:GetService("TweenService"):Create(
        UIScale,
        TweenInfo.new(0.1, Enum.EasingStyle.Quad, Enum.EasingDirection.InOut),
        {Scale = 0.8}
    )
    tween1:Play()
    tween1.Completed:Connect(function()
        local tween2 = game:GetService("TweenService"):Create(
            UIScale,
            TweenInfo.new(0.1, Enum.EasingStyle.Back, Enum.EasingDirection.Out),
            {Scale = 1.1}
        )
        tween2:Play()
        tween2.Completed:Connect(function()
            local tween3 = game:GetService("TweenService"):Create(
                UIScale,
                TweenInfo.new(0.1, Enum.EasingStyle.Quad, Enum.EasingDirection.Out),
                {Scale = 1}
            )
            tween3:Play()
        end)
    end)
end

wait(3)

local Fluent = loadstring(game:HttpGet("https://github.com/dawid-scripts/Fluent/releases/latest/download/main.lua"))()
local SaveManager = loadstring(game:HttpGet("https://raw.githubusercontent.com/dawid-scripts/Fluent/master/Addons/SaveManager.lua"))()
local InterfaceManager = loadstring(game:HttpGet("https://raw.githubusercontent.com/dawid-scripts/Fluent/master/Addons/InterfaceManager.lua"))()

local Window = Fluent:CreateWindow({
    Title = "SPACE HUB | BLOX FRUIT ",
    SubTitle = "Created by MOHA ",
    TabWidth = 155,
    Size = UDim2.fromOffset(600, 500),
    Acrylic = true,
    Theme = "Dark",
    MinimizeKey = Enum.KeyCode.LeftControl
})

-- Hide/Show Logic Fixed 
local isHidden = false
ImageButton.MouseButton1Click:Connect(function()
    animateButton()
    wait(0.2)
    if isHidden then
        for _, gui in pairs(game.CoreGui:GetChildren()) do
            if gui.Name == "ScreenGui" and gui:FindFirstChild("Frame") then
                gui.Enabled = true
            end
        end
        if Window and Window.Root then
            Window.Root.Visible = true
        end
        isHidden = false
    else
        for _, gui in pairs(game.CoreGui:GetChildren()) do
            if gui.Name == "ScreenGui" and gui:FindFirstChild("Frame") then
                gui.Enabled = false
            end
        end
        if Window and Window.Root then
            Window.Root.Visible = false
        end
        isHidden = true
    end
end)

local Tabs = {
    Main = Window:AddTab({ Title = "Main", Icon = "home" }),
    AutoFarm = Window:AddTab({ Title = "Auto Farm", Icon = "zap" }),
    Raid = Window:AddTab({ Title = "Raid", Icon = "shield" }),
    V4 = Window:AddTab({ Title = "V4 Awakening", Icon = "star" }),
    PvP = Window:AddTab({ Title = "PvP", Icon = "sword" }),
    Teleport = Window:AddTab({ Title = "Teleport", Icon = "map-pin" }),
    Sea = Window:AddTab({ Title = "Sea", Icon = "anchor" }),
    Settings = Window:AddTab({ Title = "Settings", Icon = "settings" })
}

-- Services
local Players = game:GetService("Players")
local RunService = game:GetService("RunService")
local TweenService = game:GetService("TweenService")
local HttpService = game:GetService("HttpService")
local ReplicatedStorage = game:GetService("ReplicatedStorage")
local Workspace = game:GetService("Workspace")
local UserInputService = game:GetService("UserInputService")
local VirtualInputManager = game:GetService("VirtualInputManager")

repeat wait() until game:IsLoaded()

local Player = Players.LocalPlayer
repeat wait() until Player.Character
local Character = Player.Character
local Humanoid = Character:WaitForChild("Humanoid")
local RootPart = Character:WaitForChild("HumanoidRootPart")

-- Global Variables
_G.AutoFarm = false
_G.FastAttack = false
_G.BringMobs = false
_G.AutoQuest = false
_G.AutoSaber = false
_G.AutoSecondSea = false
_G.AutoRaceV2 = false
_G.AutoRaceV3 = false
_G.AutoThirdSea = false
_G.AutoCDK = false
_G.AutoYama = false
_G.AutoTushita = false
_G.AutoBones = false
_G.AutoAllBoss = false
_G.AutoSelectedBoss = false
_G.AutoRipIndra = false
_G.AutoDoughKing = false
_G.AutoDoughPrince = false
_G.AutoRaid = false
_G.SoloRaid = false
_G.AimNearestPlayer = false
_G.SpectatePlayer = false
_G.AutoSeaBeast = false
_G.AutoKitsuneIsland = false
_G.AutoAzure = false
_G.AutoGhostShip = false
_G.AutoPiranha = false
_G.AutoShark = false
_G.AutoTerrorshark = false
_G.AutoV4Trial = false
_G.AutoKillPlayer = false
_G.BringFruit = false
_G.StoreFruit = false
_G.AutoNearestMobs = false

-- Combat Variables
_G.SelectedWeapon = "Melee"
_G.SelectedBoss = "Gorilla King"
_G.SkillZ = false
_G.SkillX = false
_G.SkillC = false
_G.SkillV = false
_G.SkillF = false

-- Quest Variables
_G.QuestName = ""
_G.QuestMob = ""
_G.QuestPosition = Vector3.new(0, 0, 0)

local function GetCurrentSea()
    local placeId = game.PlaceId
    if placeId == 2753915549 then
        return 1 -- First Sea
    elseif placeId == 4442272183 then
        return 2 -- Second Sea
    elseif placeId == 7449423635 then
        return 3 -- Third Sea
    end
    return 1
end

local function GetPlayerLevel()
    return Player.Data and Player.Data.Level and Player.Data.Level.Value or 1
end

local function GetPlayerMoney()
    return Player.Data and Player.Data.Beli and Player.Data.Beli.Value or 0
end

local function GetPlayerRace()
    return Player.Data and Player.Data.Race and Player.Data.Race.Value or "Human"
end

local function GetPlayerBounty()
    return Player.leaderstats and Player.leaderstats["Bounty/Honor"] and Player.leaderstats["Bounty/Honor"].Value or 0
end

local function GetPlayerFragments()
    return Player.Data and Player.Data.Fragments and Player.Data.Fragments.Value or 0
end

local function TweenToPosition(position, speed)
    if not position then return end
    speed = speed or 300
    local distance = (RootPart.Position - position).Magnitude
    
    if distance <= 10 then
        RootPart.CFrame = CFrame.new(position)
        return
    end
    
    local time = distance / speed
    local tween = TweenService:Create(
        RootPart,
        TweenInfo.new(time, Enum.EasingStyle.Linear),
        {CFrame = CFrame.new(position)}
    )
    tween:Play()
    return tween
end

local function GetNearestMob(mobName)
    local nearestMob = nil
    local shortestDistance = math.huge
    
    for _, mob in pairs(Workspace.Enemies:GetChildren()) do
        if mob:FindFirstChild("Humanoid") and mob:FindFirstChild("HumanoidRootPart") and mob.Humanoid.Health > 0 then
            if not mobName or mob.Name == mobName then
                local distance = (RootPart.Position - mob.HumanoidRootPart.Position).Magnitude
                if distance < shortestDistance then
                    shortestDistance = distance
                    nearestMob = mob
                end
            end
        end
    end
    
    return nearestMob
end

local function GetNearestPlayer()
    local nearestPlayer = nil
    local shortestDistance = math.huge
    
    for _, player in pairs(Players:GetPlayers()) do
        if player ~= Player and player.Character and player.Character:FindFirstChild("HumanoidRootPart") then
            local distance = (RootPart.Position - player.Character.HumanoidRootPart.Position).Magnitude
            if distance < shortestDistance then
                shortestDistance = distance
                nearestPlayer = player
            end
        end
    end
    
    return nearestPlayer
end

local function EquipWeapon(weaponName)
    if weaponName == "Melee" then
        for _, tool in pairs(Player.Backpack:GetChildren()) do
            if tool:IsA("Tool") and tool.ToolTip == "Combat" then
                Humanoid:EquipTool(tool)
                return
            end
        end
    elseif weaponName == "Sword" then
        for _, tool in pairs(Player.Backpack:GetChildren()) do
            if tool:IsA("Tool") and tool.ToolTip == "Sword" then
                Humanoid:EquipTool(tool)
                return
            end
        end
    elseif weaponName == "Gun" then
        for _, tool in pairs(Player.Backpack:GetChildren()) do
            if tool:IsA("Tool") and tool.ToolTip == "Gun" then
                Humanoid:EquipTool(tool)
                return
            end
        end
    elseif weaponName == "Fruit" then
        for _, tool in pairs(Player.Backpack:GetChildren()) do
            if tool:IsA("Tool") and tool.ToolTip == "Blox Fruit" then
                Humanoid:EquipTool(tool)
                return
            end
        end
    end
end

-- Quest System from original
local QuestData = {
    [1] = { -- First Sea
        [1] = {name = "Bandit", questName = "BanditQuest1", questMob = "Bandit", pos = Vector3.new(1060, 17, 1545)},
        [15] = {name = "Monkey", questName = "JungleQuest", questMob = "Monkey", pos = Vector3.new(-1602, 37, 152)},
        [30] = {name = "Gorilla", questName = "JungleQuest2", questMob = "Gorilla", pos = Vector3.new(-1602, 37, 152)},
        [60] = {name = "Pirate", questName = "Area1Quest", questMob = "Pirate", pos = Vector3.new(-429, 73, 1835)},
        [75] = {name = "Brute", questName = "Area1Quest", questMob = "Brute", pos = Vector3.new(-429, 73, 1835)},
        [90] = {name = "Desert Bandit", questName = "DesertQuest", questMob = "Desert Bandit", pos = Vector3.new(897, 7, 4388)},
        [100] = {name = "Desert Officer", questName = "DesertQuest", questMob = "Desert Officer", pos = Vector3.new(897, 7, 4388)},
        [120] = {name = "Snow Bandit", questName = "SnowQuest", questMob = "Snow Bandit", pos = Vector3.new(1389, 88, -1298)},
        [150] = {name = "Snowman", questName = "SnowQuest", questMob = "Snowman", pos = Vector3.new(1389, 88, -1298)},
        [175] = {name = "Chief Petty Officer", questName = "MarineQuest2", questMob = "Chief Petty Officer", pos = Vector3.new(-5040, 29, 4326)},
        [200] = {name = "Sky Bandit", questName = "SkyQuest", questMob = "Sky Bandit", pos = Vector3.new(-4842, 718, -2623)},
        [300] = {name = "Dark Master", questName = "SkyQuest", questMob = "Dark Master", pos = Vector3.new(-4842, 718, -2623)},
        [325] = {name = "Prisoner", questName = "PrisonerQuest", questMob = "Prisoner", pos = Vector3.new(5308, 1, 474)},
        [375] = {name = "Dangerous Prisoner", questName = "PrisonerQuest", questMob = "Dangerous Prisoner", pos = Vector3.new(5308, 1, 474)},
        [400] = {name = "Toga Warrior", questName = "ColosseumQuest", questMob = "Toga Warrior", pos = Vector3.new(-1581, 7, -2986)},
        [450] = {name = "Gladiator", questName = "ColosseumQuest", questMob = "Gladiator", pos = Vector3.new(-1581, 7, -2986)},
        [475] = {name = "Military Soldier", questName = "MagmaQuest", questMob = "Military Soldier", pos = Vector3.new(-5316, 12, 8515)},
        [525] = {name = "Military Spy", questName = "MagmaQuest", questMob = "Military Spy", pos = Vector3.new(-5316, 12, 8515)},
        [550] = {name = "Fishman Warrior", questName = "FishmanQuest", questMob = "Fishman Warrior", pos = Vector3.new(61123, 19, 1569)},
        [575] = {name = "Fishman Commando", questName = "FishmanQuest", questMob = "Fishman Commando", pos = Vector3.new(61123, 19, 1569)},
        [700] = {name = "God's Guard", questName = "SkyExp1Quest", questMob = "God's Guard", pos = Vector3.new(-4722, 845, -1954)}
    },
    [2] = { -- Second Sea
        [700] = {name = "Raider", questName = "Area1Quest", questMob = "Raider", pos = Vector3.new(-429, 73, 1835)},
        [875] = {name = "Mercenary", questName = "Area1Quest", questMob = "Mercenary", pos = Vector3.new(-429, 73, 1835)},
        [900] = {name = "Swan Pirate", questName = "Area2Quest", questMob = "Swan Pirate", pos = Vector3.new(638, 73, 918)},
        [950] = {name = "Factory Staff", questName = "Area2Quest", questMob = "Factory Staff", pos = Vector3.new(638, 73, 918)},
        [1000] = {name = "Marine Lieutenant", questName = "MarineQuest3", questMob = "Marine Lieutenant", pos = Vector3.new(-2441, 73, -3219)},
        [1050] = {name = "Marine Captain", questName = "MarineQuest3", questMob = "Marine Captain", pos = Vector3.new(-2441, 73, -3219)},
        [1100] = {name = "Zombie", questName = "ZombieQuest", questMob = "Zombie", pos = Vector3.new(-5494, 49, -795)},
        [1125] = {name = "Vampire", questName = "ZombieQuest", questMob = "Vampire", pos = Vector3.new(-5494, 49, -795)},
        [1150] = {name = "Snow Trooper", questName = "SnowMountainQuest", questMob = "Snow Trooper", pos = Vector3.new(609, 401, -5371)},
        [1175] = {name = "Winter Warrior", questName = "SnowMountainQuest", questMob = "Winter Warrior", pos = Vector3.new(609, 401, -5371)},
        [1200] = {name = "Lab Subordinate", questName = "IceSideQuest", questMob = "Lab Subordinate", pos = Vector3.new(-6062, 16, -4902)},
        [1250] = {name = "Horned Warrior", questName = "IceSideQuest", questMob = "Horned Warrior", pos = Vector3.new(-6062, 16, -4902)},
        [1275] = {name = "Magma Ninja", questName = "FireSideQuest", questMob = "Magma Ninja", pos = Vector3.new(-5429, 16, -5297)},
        [1300] = {name = "Lava Pirate", questName = "FireSideQuest", questMob = "Lava Pirate", pos = Vector3.new(-5429, 16, -5297)},
        [1325] = {name = "Ship Deckhand", questName = "ShipQuest1", questMob = "Ship Deckhand", pos = Vector3.new(1038, 125, 32911)},
        [1350] = {name = "Ship Engineer", questName = "ShipQuest1", questMob = "Ship Engineer", pos = Vector3.new(1038, 125, 32911)},
        [1375] = {name = "Ship Steward", questName = "ShipQuest2", questMob = "Ship Steward", pos = Vector3.new(969, 125, 33245)},
        [1400] = {name = "Ship Officer", questName = "ShipQuest2", questMob = "Ship Officer", pos = Vector3.new(969, 125, 33245)},
        [1425] = {name = "Arctic Warrior", questName = "FrostQuest", questMob = "Arctic Warrior", pos = Vector3.new(5669, 28, -6482)},
        [1450] = {name = "Snow Lurker", questName = "FrostQuest", questMob = "Snow Lurker", pos = Vector3.new(5669, 28, -6482)},
        [1475] = {name = "Sea Soldier", questName = "ForgottenQuest", questMob = "Sea Soldier", pos = Vector3.new(-3054, 237, -10148)},
        [1500] = {name = "Water Fighter", questName = "ForgottenQuest", questMob = "Water Fighter", pos = Vector3.new(-3054, 237, -10148)}
    },
    [3] = { -- Third Sea
        [1500] = {name = "Pirate Millionaire", questName = "PiratePortQuest", questMob = "Pirate Millionaire", pos = Vector3.new(-290, 44, 5581)},
        [1525] = {name = "Pistol Billionaire", questName = "PiratePortQuest", questMob = "Pistol Billionaire", pos = Vector3.new(-290, 44, 5581)},
        [1575] = {name = "Dragon Crew Warrior", questName = "AmazonQuest", questMob = "Dragon Crew Warrior", pos = Vector3.new(5832, 52, -1928)},
        [1600] = {name = "Dragon Crew Archer", questName = "AmazonQuest", questMob = "Dragon Crew Archer", pos = Vector3.new(5832, 52, -1928)},
        [1625] = {name = "Female Islander", questName = "AmazonQuest2", questMob = "Female Islander", pos = Vector3.new(5448, 602, 751)},
        [1675] = {name = "Giant Islander", questName = "AmazonQuest2", questMob = "Giant Islander", pos = Vector3.new(5448, 602, 751)},
        [1700] = {name = "Marine Commodore", questName = "MarineTreeIsland", questMob = "Marine Commodore", pos = Vector3.new(2180, 29, -6737)},
        [1725] = {name = "Marine Rear Admiral", questName = "MarineTreeIsland", questMob = "Marine Rear Admiral", pos = Vector3.new(2180, 29, -6737)},
        [1775] = {name = "Fishman Raider", questName = "DeepForestIsland3", questMob = "Fishman Raider", pos = Vector3.new(-13235, 333, -7625)},
        [1800] = {name = "Fishman Captain", questName = "DeepForestIsland", questMob = "Fishman Captain", pos = Vector3.new(-13235, 333, -7625)},
        [1825] = {name = "Forest Pirate", questName = "DeepForestIsland", questMob = "Forest Pirate", pos = Vector3.new(-13235, 333, -7625)},
        [1850] = {name = "Mythological Pirate", questName = "DeepForestIsland2", questMob = "Mythological Pirate", pos = Vector3.new(-13235, 333, -7625)},
        [1900] = {name = "Jungle Pirate", questName = "DeepForestIsland2", questMob = "Jungle Pirate", pos = Vector3.new(-12680, 390, -9902)},
        [1950] = {name = "Musketeer Pirate", questName = "DeepForestIsland2", questMob = "Musketeer Pirate", pos = Vector3.new(-12680, 390, -9902)},
        [2000] = {name = "Reborn Skeleton", questName = "HauntedQuest1", questMob = "Reborn Skeleton", pos = Vector3.new(-9482, 142, 5566)},
        [2025] = {name = "Living Zombie", questName = "HauntedQuest1", questMob = "Living Zombie", pos = Vector3.new(-9482, 142, 5566)},
        [2050] = {name = "Demonic Soul", questName = "HauntedQuest2", questMob = "Demonic Soul", pos = Vector3.new(-9515, 172, 6078)},
        [2075] = {name = "Posessed Mummy", questName = "HauntedQuest2", questMob = "Posessed Mummy", pos = Vector3.new(-9515, 172, 6078)},
        [2100] = {name = "Peanut Scout", questName = "NutsIslandQuest", questMob = "Peanut Scout", pos = Vector3.new(-2104, 38, -10192)},
        [2125] = {name = "Peanut President", questName = "NutsIslandQuest", questMob = "Peanut President", pos = Vector3.new(-2104, 38, -10192)},
        [2150] = {name = "Ice Cream Chef", questName = "IceCreamIslandQuest", questMob = "Ice Cream Chef", pos = Vector3.new(-821, 66, -10965)},
        [2175] = {name = "Ice Cream Commander", questName = "IceCreamIslandQuest", questMob = "Ice Cream Commander", pos = Vector3.new(-821, 66, -10965)},
        [2200] = {name = "Cookie Crafter", questName = "CakeQuest1", questMob = "Cookie Crafter", pos = Vector3.new(-2021, 38, -12028)},
        [2225] = {name = "Cake Guard", questName = "CakeQuest1", questMob = "Cake Guard", pos = Vector3.new(-2021, 38, -12028)},
        [2250] = {name = "Baking Staff", questName = "CakeQuest2", questMob = "Baking Staff", pos = Vector3.new(-1928, 38, -12842)},
        [2275] = {name = "Head Baker", questName = "CakeQuest2", questMob = "Head Baker", pos = Vector3.new(-1928, 38, -12842)},
        [2300] = {name = "Cocoa Warrior", questName = "ChocQuest1", questMob = "Cocoa Warrior", pos = Vector3.new(233, 25, -12201)},
        [2325] = {name = "Chocolate Bar Battler", questName = "ChocQuest1", questMob = "Chocolate Bar Battler", pos = Vector3.new(233, 25, -12201)},
        [2350] = {name = "Sweet Thief", questName = "ChocQuest2", questMob = "Sweet Thief", pos = Vector3.new(150, 25, -12774)},
        [2375] = {name = "Candy Rebel", questName = "ChocQuest2", questMob = "Candy Rebel", pos = Vector3.new(150, 25, -12774)},
        [2400] = {name = "Candy Pirate", questName = "CandyQuest1", questMob = "Candy Pirate", pos = Vector3.new(-1150, 21, -14298)},
        [2425] = {name = "Snow Demon", questName = "CandyQuest1", questMob = "Snow Demon", pos = Vector3.new(-1150, 21, -14298)},
        [2450] = {name = "Isle Outlaw", questName = "TikiQuest1", questMob = "Isle Outlaw", pos = Vector3.new(-16547, 8, 448)},
        [2475] = {name = "Island Boy", questName = "TikiQuest1", questMob = "Island Boy", pos = Vector3.new(-16547, 8, 448)},
        [2500] = {name = "Sun-kissed Warrior", questName = "TikiQuest2", questMob = "Sun-kissed Warrior", pos = Vector3.new(-16539, 56, 1051)},
        [2525] = {name = "Isle Champion", questName = "TikiQuest2", questMob = "Isle Champion", pos = Vector3.new(-16539, 56, 1051)}
    }
}

local function GetCurrentQuest()
    local level = GetPlayerLevel()
    local sea = GetCurrentSea()
    local questsForSea = QuestData[sea]
    
    if not questsForSea then return nil end
    
    local bestQuest = nil
    for questLevel, questData in pairs(questsForSea) do
        if level >= questLevel then
            bestQuest = questData
        end
    end
    
    return bestQuest
end

local function StartQuest()
    local questData = GetCurrentQuest()
    if not questData then return false end
    
    _G.QuestName = questData.questName
    _G.QuestMob = questData.questMob
    _G.QuestPosition = questData.pos
    
    TweenToPosition(questData.pos)
    wait(1)
    
    local args = {
        [1] = "StartQuest",
        [2] = questData.questName,
        [3] = 1
    }
    game:GetService("ReplicatedStorage").Remotes.CommF_:InvokeServer(unpack(args))
    
    return true
end

local function CheckQuest()
    if Player.PlayerGui.Main.Quest.Visible == false then
        return false
    end
    return true
end

-- Enhanced Fast Attack  
local function AttackFunction()
    if _G.FastAttack then
        pcall(function()
            if Player.Character:FindFirstChildOfClass("Tool") then
                local tool = Player.Character:FindFirstChildOfClass("Tool")
                if tool:FindFirstChild("Handle") then
                    -- Multiple attack methods for better hit registration
                    local args = {
                        [1] = 1,
                        [2] = Vector3.new(0, 0, 0),
                        [3] = 1,
                        [4] = tool.Name
                    }
                    game:GetService("ReplicatedStorage").RigControllerEvent:FireServer(unpack(args))
                    
                    -- Additional attack remote
                    game:GetService("ReplicatedStorage").Remotes.CommF_:InvokeServer("weaponOrbEvent")
                    
                    -- Click attack
                    VirtualInputManager:SendMouseButtonEvent(0, 0, 0, true, game, 1)
                    VirtualInputManager:SendMouseButtonEvent(0, 0, 0, false, game, 1)
                end
            end
        end)
    end
end

-- Enhanced Bring Mobs with larger hitbox
local function BringMobs()
    if _G.BringMobs then
        for _, mob in pairs(Workspace.Enemies:GetChildren()) do
            if mob:FindFirstChild("Humanoid") and mob:FindFirstChild("HumanoidRootPart") and mob.Humanoid.Health > 0 then
                if mob.Name == _G.QuestMob or not _G.QuestMob then
                    local distance = (RootPart.Position - mob.HumanoidRootPart.Position).Magnitude
                    if distance <= 500 then
                        mob.HumanoidRootPart.Size = Vector3.new(60, 60, 60)
                        mob.HumanoidRootPart.CFrame = RootPart.CFrame * CFrame.new(0, 0, -5)
                        mob.HumanoidRootPart.CanCollide = false
                        mob.Humanoid.WalkSpeed = 0
                        mob.Humanoid.JumpPower = 0
                        mob.HumanoidRootPart.Transparency = 1
                        if mob:FindFirstChild("Body") then
                            for _, part in pairs(mob.Body:GetChildren()) do
                                if part:IsA("Part") then
                                    part.CanCollide = false
                                end
                            end
                        end
                        sethiddenproperty(mob, "NetworkOwner", Player)
                    end
                end
            end
        end
    end
end

-- Current sea
local currentSea = GetCurrentSea()

-- Main Tab
local WeaponSection = Tabs.Main:AddSection("Weapon Selection")

local WeaponDropdown = Tabs.Main:AddDropdown("WeaponDropdown", {
    Title = "Select Weapon",
    Values = {"Melee", "Sword", "Gun", "Fruit"},
    Multi = false,
    Default = 1,
})

WeaponDropdown:OnChanged(function(Value)
    _G.SelectedWeapon = Value
end)

local CombatSection = Tabs.Main:AddSection("Combat")

local FastAttackToggle = Tabs.Main:AddToggle("FastAttack", {
    Title = "Fast Attack",
    Default = false
})

FastAttackToggle:OnChanged(function(Value)
    _G.FastAttack = Value
end)

local BringMobsToggle = Tabs.Main:AddToggle("BringMobs", {
    Title = "Bring Mobs",
    Default = false
})

BringMobsToggle:OnChanged(function(Value)
    _G.BringMobs = Value
end)

-- Fruit section
local FruitSection = Tabs.Main:AddSection("Fruit Management")

local BringFruitToggle = Tabs.Main:AddToggle("BringFruit", {
    Title = "Bring Fruit",
    Default = false
})

BringFruitToggle:OnChanged(function(Value)
    _G.BringFruit = Value
end)

local StoreFruitToggle = Tabs.Main:AddToggle("StoreFruit", {
    Title = "Auto Store Fruit",
    Default = false
})

StoreFruitToggle:OnChanged(function(Value)
    _G.StoreFruit = Value
end)

-- Sea quest section
local QuestSection = Tabs.Main:AddSection("Sea Quests")

if currentSea == 1 then
    local AutoSaberToggle = Tabs.Main:AddToggle("AutoSaber", {
        Title = "Auto Saber Quest",
        Default = false
    })
    
    AutoSaberToggle:OnChanged(function(Value)
        _G.AutoSaber = Value
    end)
    
    local AutoSecondSeaToggle = Tabs.Main:AddToggle("AutoSecondSea", {
        Title = "Auto Second Sea Quest",
        Default = false
    })
    
    AutoSecondSeaToggle:OnChanged(function(Value)
        _G.AutoSecondSea = Value
    end)

elseif currentSea == 2 then
    local AutoRaceV2Toggle = Tabs.Main:AddToggle("AutoRaceV2", {
        Title = "Auto Race V2",
        Default = false
    })
    
    AutoRaceV2Toggle:OnChanged(function(Value)
        _G.AutoRaceV2 = Value
    end)
    
    local AutoRaceV3Toggle = Tabs.Main:AddToggle("AutoRaceV3", {
        Title = "Auto Race V3",
        Default = false
    })
    
    AutoRaceV3Toggle:OnChanged(function(Value)
        _G.AutoRaceV3 = Value
    end)
    
    local AutoThirdSeaToggle = Tabs.Main:AddToggle("AutoThirdSea", {
        Title = "Auto Third Sea Quest",
        Default = false
    })
    
    AutoThirdSeaToggle:OnChanged(function(Value)
        _G.AutoThirdSea = Value
    end)

elseif currentSea == 3 then
    local AutoCDKToggle = Tabs.Main:AddToggle("AutoCDK", {
        Title = "Auto CDK",
        Default = false
    })
    
    AutoCDKToggle:OnChanged(function(Value)
        _G.AutoCDK = Value
    end)
    
    local AutoYamaToggle = Tabs.Main:AddToggle("AutoYama", {
        Title = "Auto Yama",
        Default = false
    })
    
    AutoYamaToggle:OnChanged(function(Value)
        _G.AutoYama = Value
    end)
    
    local AutoTushitaToggle = Tabs.Main:AddToggle("AutoTushita", {
        Title = "Auto Tushita",
        Default = false
    })
    
    AutoTushitaToggle:OnChanged(function(Value)
        _G.AutoTushita = Value
    end)
end

-- Player Stats
local StatsSection = Tabs.Main:AddSection("Player Stats")

local StatsLabel = Tabs.Main:AddParagraph({
    Title = "Player Information",
    Content = "Level: " .. GetPlayerLevel() .. 
              "\nSea: " .. GetCurrentSea() .. 
              "\nBeli: " .. GetPlayerMoney() .. 
              "\nFragments: " .. GetPlayerFragments() ..
              "\nBounty: " .. GetPlayerBounty() ..
              "\nRace: " .. GetPlayerRace()
})

-- Auto Farm Tab
local LevelFarmSection = Tabs.AutoFarm:AddSection("Level Farming")

local AutoFarmToggle = Tabs.AutoFarm:AddToggle("AutoFarm", {
    Title = "Auto Farm Level",
    Default = false
})

AutoFarmToggle:OnChanged(function(Value)
    _G.AutoFarm = Value
end)

local AutoNearestMobsToggle = Tabs.AutoFarm:AddToggle("AutoNearestMobs", {
    Title = "Auto Farm Nearest Mobs",
    Default = false
})

AutoNearestMobsToggle:OnChanged(function(Value)
    _G.AutoNearestMobs = Value
end)

local AutoBonesToggle = Tabs.AutoFarm:AddToggle("AutoBones", {
    Title = "Auto Farm Bones",
    Default = false
})

AutoBonesToggle:OnChanged(function(Value)
    _G.AutoBones = Value
end)

-- Boss Section
local BossSection = Tabs.AutoFarm:AddSection("Boss Farming")

local AutoAllBossToggle = Tabs.AutoFarm:AddToggle("AutoAllBoss", {
    Title = "Auto Farm All Bosses",
    Default = false
})

AutoAllBossToggle:OnChanged(function(Value)
    _G.AutoAllBoss = Value
end)

local BossValues = {}
if currentSea == 1 then
    BossValues = {"Gorilla King", "Bobby", "Yeti", "Mob Leader", "Vice Admiral", "Warden", "Chief Warden", "Swan", "Magma Admiral", "Fishman Lord", "Wysper", "Thunder God", "Cyborg", "Ice Admiral", "Greybeard"}
elseif currentSea == 2 then
    BossValues = {"Diamond", "Jeremy", "Fajita", "Don Swan", "Smoke Admiral", "Cursed Captain", "Darkbeard", "Order", "Awakened Ice Admiral", "Tide Keeper"}
elseif currentSea == 3 then
    BossValues = {"Stone", "Island Empress", "Kilo Admiral", "Captain Elephant", "Beautiful Pirate", "rip_indra True Form", "Longma", "Soul Reaper", "Cake Queen"}
end

local BossDropdown = Tabs.AutoFarm:AddDropdown("BossDropdown", {
    Title = "Select Boss to Farm",
    Values = BossValues,
    Multi = false,
    Default = 1,
})

BossDropdown:OnChanged(function(Value)
    _G.SelectedBoss = Value
end)

local AutoSelectedBossToggle = Tabs.AutoFarm:AddToggle("AutoSelectedBoss", {
    Title = "Auto Farm Selected Boss",
    Default = false
})

AutoSelectedBossToggle:OnChanged(function(Value)
    _G.AutoSelectedBoss = Value
end)

-- Special Bosses
local SpecialBossSection = Tabs.AutoFarm:AddSection("Special Bosses")

local AutoRipIndraToggle = Tabs.AutoFarm:AddToggle("AutoRipIndra", {
    Title = "Auto Rip Indra",
    Default = false
})

AutoRipIndraToggle:OnChanged(function(Value)
    _G.AutoRipIndra = Value
end)

local AutoDoughKingToggle = Tabs.AutoFarm:AddToggle("AutoDoughKing", {
    Title = "Auto Dough King",
    Default = false
})

AutoDoughKingToggle:OnChanged(function(Value)
    _G.AutoDoughKing = Value
end)

local AutoDoughPrinceToggle = Tabs.AutoFarm:AddToggle("AutoDoughPrince", {
    Title = "Auto Dough Prince",
    Default = false
})

AutoDoughPrinceToggle:OnChanged(function(Value)
    _G.AutoDoughPrince = Value
end)

-- Raid Tab with Chip Dropdown
local RaidChips = {
    "Flame", "Ice", "Quake", "Light", "Dark", "String", "Rumble", "Magma",
    "Human: Buddha", "Sand", "Bird: Phoenix", "Rubber", "Barrier", "Gravity",
    "T-Rex", "Dough", "Shadow", "Venom", "Control", "Soul", "Dragon"
}

if currentSea >= 2 then
    local RaidSection = Tabs.Raid:AddSection("Raid Controls")
    
    local ChipDropdown = Tabs.Raid:AddDropdown("ChipDropdown", {
        Title = "Select Raid Chip",
        Values = RaidChips,
        Multi = false,
        Default = 1,
    })
    
    ChipDropdown:OnChanged(function(Value)
        _G.SelectedChip = Value
    end)

    local BuyChipButton = Tabs.Raid:AddButton({
        Title = "Buy Selected Chip",
        Description = "Purchase the selected raid chip",
        Callback = function()
            local args = {
                [1] = "RaidsNpc",
                [2] = "Select",
                [3] = _G.SelectedChip or "Flame"
            }
            game:GetService("ReplicatedStorage").Remotes.CommF_:InvokeServer(unpack(args))
        end
    })

    local StartRaidButton = Tabs.Raid:AddButton({
        Title = "Start Raid",
        Description = "Start the raid with selected chip",
        Callback = function()
            local args = {
                [1] = "RaidsNpc",
                [2] = "StartRaid",
                [3] = _G.SelectedChip or "Flame"
            }
            game:GetService("ReplicatedStorage").Remotes.CommF_:InvokeServer(unpack(args))
        end
    })

    local SoloRaidToggle = Tabs.Raid:AddToggle("SoloRaid", {
        Title = "Auto Raid",
        Default = false
    })

    SoloRaidToggle:OnChanged(function(Value)
        _G.SoloRaid = Value
    end)
else
    local RaidInfo = Tabs.Raid:AddParagraph({
        Title = "Raid Unavailable",
        Content = "You need to be in Second Sea or Third Sea to access raids."
    })
end

-- V4 Tab
if currentSea == 3 then
    local V4Section = Tabs.V4:AddSection("V4 Race Awakening")

    local AutoV4TrialToggle = Tabs.V4:AddToggle("AutoV4Trial", {
        Title = "Auto Complete V4 Trials",
        Default = false
    })

    AutoV4TrialToggle:OnChanged(function(Value)
        _G.AutoV4Trial = Value
    end)

    local AutoKillPlayerToggle = Tabs.V4:AddToggle("AutoKillPlayer", {
        Title = "Auto Kill Player (for trials)",
        Default = false
    })

    AutoKillPlayerToggle:OnChanged(function(Value)
        _G.AutoKillPlayer = Value
    end)

    local V4TeleportSection = Tabs.V4:AddSection("V4 Teleports")

    local TeleportTempleButton = Tabs.V4:AddButton({
        Title = "Teleport to Temple",
        Description = "Teleport to Ancient One",
        Callback = function()
            TweenToPosition(Vector3.new(28286, 14895, 102))
        end
    })

    local TeleportAcientOneButton = Tabs.V4:AddButton({
        Title = "Teleport to Ancient One",
        Description = "Teleport to start V4 trials",
        Callback = function()
            TweenToPosition(Vector3.new(28286, 14895, 102))
        end
    })
else
    local V4Info = Tabs.V4:AddParagraph({
        Title = "V4 Awakening Unavailable",
        Content = "You need to be in Third Sea to access V4 Race Awakening features."
    })
end

-- PvP Tab
local PvPSection = Tabs.PvP:AddSection("Player Targeting")

local AimNearestPlayerToggle = Tabs.PvP:AddToggle("AimNearestPlayer", {
    Title = "Aim Nearest Player",
    Default = false
})

AimNearestPlayerToggle:OnChanged(function(Value)
    _G.AimNearestPlayer = Value
end)

local SpectateToggle = Tabs.PvP:AddToggle("Spectate", {
    Title = "Spectate Player",
    Default = false
})

SpectateToggle:OnChanged(function(Value)
    _G.SpectatePlayer = Value
    if Value then
        local nearestPlayer = GetNearestPlayer()
        if nearestPlayer then
            Workspace.CurrentCamera.CameraSubject = nearestPlayer.Character.Humanoid
        end
    else
        Workspace.CurrentCamera.CameraSubject = Player.Character.Humanoid
    end
end)

-- Skills Section
local SkillsSection = Tabs.PvP:AddSection("Skills")

local SkillZToggle = Tabs.PvP:AddToggle("SkillZ", {
    Title = "Skill Z",
    Default = false
})

SkillZToggle:OnChanged(function(Value)
    _G.SkillZ = Value
end)

local SkillXToggle = Tabs.PvP:AddToggle("SkillX", {
    Title = "Skill X",
    Default = false
})

SkillXToggle:OnChanged(function(Value)
    _G.SkillX = Value
end)

local SkillCToggle = Tabs.PvP:AddToggle("SkillC", {
    Title = "Skill C",
    Default = false
})

SkillCToggle:OnChanged(function(Value)
    _G.SkillC = Value
end)

local SkillVToggle = Tabs.PvP:AddToggle("SkillV", {
    Title = "Skill V",
    Default = false
})

SkillVToggle:OnChanged(function(Value)
    _G.SkillV = Value
end)

local SkillFToggle = Tabs.PvP:AddToggle("SkillF", {
    Title = "Skill F",
    Default = false
})

SkillFToggle:OnChanged(function(Value)
    _G.SkillF = Value
end)

-- Teleport Tab with Dropdown
local TeleportSection = Tabs.Teleport:AddSection("Teleport Locations")

local teleportLocations = {}
local teleportPositions = {}

if currentSea == 1 then
    teleportLocations = {
        "Spawn", "Bandit Camp", "Jungle", "Pirate Village", "Desert", "Frozen Village",
        "Marine Fortress", "Sky Island", "Prison", "Colosseum", "Magma Village",
        "Under Water City", "Fountain City", "Shells Town"
    }
    teleportPositions = {
        ["Spawn"] = Vector3.new(1, 17, 1471),
        ["Bandit Camp"] = Vector3.new(1045, 17, 1550),
        ["Jungle"] = Vector3.new(-1612, 37, 149),
        ["Pirate Village"] = Vector3.new(-1181, 5, 3803),
        ["Desert"] = Vector3.new(944, 21, 4481),
        ["Frozen Village"] = Vector3.new(1198, 104, -1297),
        ["Marine Fortress"] = Vector3.new(-2566, 7, -3038),
        ["Sky Island"] = Vector3.new(-4607, 873, -1667),
        ["Prison"] = Vector3.new(4875, 6, 734),
        ["Colosseum"] = Vector3.new(-1427, 8, -2673),
        ["Magma Village"] = Vector3.new(-5247, 13, 8504),
        ["Under Water City"] = Vector3.new(61163, 11, 1819),
        ["Fountain City"] = Vector3.new(5127, 60, 4105),
        ["Shells Town"] = Vector3.new(-7865, 6, 5425)
    }
elseif currentSea == 2 then
    teleportLocations = {
        "Kingdom of Rose", "Cafe", "Mansion", "Graveyard", "Snow Mountain",
        "Hot and Cold", "Cursed Ship", "Ice Castle", "Forgotten Island",
        "Desert Kingdom", "Marine Fortress"
    }
    teleportPositions = {
        ["Kingdom of Rose"] = Vector3.new(-379, 74, 853),
        ["Cafe"] = Vector3.new(-385, 74, 297),
        ["Mansion"] = Vector3.new(-12471, 374, -7551),
        ["Graveyard"] = Vector3.new(-5494, 49, -795),
        ["Snow Mountain"] = Vector3.new(753, 408, -5274),
        ["Hot and Cold"] = Vector3.new(-6062, 16, -4902),
        ["Cursed Ship"] = Vector3.new(923, 125, 32852),
        ["Ice Castle"] = Vector3.new(5669, 28, -6481),
        ["Forgotten Island"] = Vector3.new(-3054, 237, -10145),
        ["Desert Kingdom"] = Vector3.new(944, 21, 4481),
        ["Marine Fortress"] = Vector3.new(-4914, 51, 4101)
    }
elseif currentSea == 3 then
    teleportLocations = {
        "Port Town", "Hydra Island", "Great Tree", "Castle on the Sea",
        "Floating Turtle", "Haunted Castle", "Ice Cream Island", "Peanut Island",
        "Cocoa Island", "Candy Island", "Cake Island", "Sea of Treats"
    }
    teleportPositions = {
        ["Port Town"] = Vector3.new(-290, 44, 5581),
        ["Hydra Island"] = Vector3.new(5228, 604, -345),
        ["Great Tree"] = Vector3.new(2681, 1682, -7190),
        ["Castle on the Sea"] = Vector3.new(-5075, 314, -3152),
        ["Floating Turtle"] = Vector3.new(-13274, 332, -7620),
        ["Haunted Castle"] = Vector3.new(-9515, 172, 5567),
        ["Ice Cream Island"] = Vector3.new(-902, 79, -10988),
        ["Peanut Island"] = Vector3.new(-2104, 38, -10192),
        ["Cocoa Island"] = Vector3.new(87, 73, -12297),
        ["Candy Island"] = Vector3.new(-1049, 14, -14445),
        ["Cake Island"] = Vector3.new(-2021, 32, -11864),
        ["Sea of Treats"] = Vector3.new(150, 25, -12774)
    }
end

local TeleportDropdown = Tabs.Teleport:AddDropdown("TeleportDropdown", {
    Title = "Select Location",
    Values = teleportLocations,
    Multi = false,
    Default = 1,
})

local selectedTeleportLocation = teleportLocations[1]
TeleportDropdown:OnChanged(function(Value)
    selectedTeleportLocation = Value
end)

local TeleportButton = Tabs.Teleport:AddButton({
    Title = "Teleport to Selected Place",
    Description = "Teleport to the selected location",
    Callback = function()
        local position = teleportPositions[selectedTeleportLocation]
        if position then
            TweenToPosition(position)
        end
    end
})

-- Sea Travel Buttons
local SeaTravelSection = Tabs.Teleport:AddSection("Sea Travel")

local TeleportFirstSeaButton = Tabs.Teleport:AddButton({
    Title = "Teleport to First Sea",
    Description = "Travel to First Sea (Level 1-700)",
    Callback = function()
        game:GetService("TeleportService"):Teleport(2753915549, Player)
    end
})

local TeleportSecondSeaButton = Tabs.Teleport:AddButton({
    Title = "Teleport to Second Sea", 
    Description = "Travel to Second Sea (Level 700+)",
    Callback = function()
        game:GetService("TeleportService"):Teleport(4442272183, Player)
    end
})

local TeleportThirdSeaButton = Tabs.Teleport:AddButton({
    Title = "Teleport to Third Sea",
    Description = "Travel to Third Sea (Level 1500+)", 
    Callback = function()
        game:GetService("TeleportService"):Teleport(7449423635, Player)
    end
})

-- Sea Tab
local SeaSection = Tabs.Sea:AddSection("Sea Events")

local AutoSeaBeastToggle = Tabs.Sea:AddToggle("AutoSeaBeast", {
    Title = "Auto Sea Beast",
    Default = false
})

AutoSeaBeastToggle:OnChanged(function(Value)
    _G.AutoSeaBeast = Value
end)

local AutoKitsuneIslandToggle = Tabs.Sea:AddToggle("AutoKitsuneIsland", {
    Title = "Auto Kitsune Island",
    Default = false
})

AutoKitsuneIslandToggle:OnChanged(function(Value)
    _G.AutoKitsuneIsland = Value
end)

local AutoSharkToggle = Tabs.Sea:AddToggle("AutoShark", {
    Title = "Auto Shark",
    Default = false
})

AutoSharkToggle:OnChanged(function(Value)
    _G.AutoShark = Value
end)

local AutoTerrorsharkToggle = Tabs.Sea:AddToggle("AutoTerrorshark", {
    Title = "Auto Terror Shark",
    Default = false
})

AutoTerrorsharkToggle:OnChanged(function(Value)
    _G.AutoTerrorshark = Value
end)

local AutoPiranhaToggle = Tabs.Sea:AddToggle("AutoPiranha", {
    Title = "Auto Piranha",
    Default = false
})

AutoPiranhaToggle:OnChanged(function(Value)
    _G.AutoPiranha = Value
end)

local AutoGhostShipToggle = Tabs.Sea:AddToggle("AutoGhostShip", {
    Title = "Auto Ghost Ship",
    Default = false
})

AutoGhostShipToggle:OnChanged(function(Value)
    _G.AutoGhostShip = Value
end)

-- Auto Farm Logic with all functions working
spawn(function()
    while wait() do
        if _G.FastAttack then
            AttackFunction()
        end
        if _G.BringMobs then
            BringMobs()
        end
        if _G.AutoFarm then
            pcall(function()
                EquipWeapon(_G.SelectedWeapon)
                if not CheckQuest() then
                    StartQuest()
                else
                    local mob = GetNearestMob(_G.QuestMob)
                    if mob then
                        TweenToPosition(mob.HumanoidRootPart.Position)
                        
                        -- Use skills
                        if _G.SkillZ then
                            VirtualInputManager:SendKeyEvent(true, "Z", false, game)
                            wait(0.1)
                        end
                        if _G.SkillX then
                            VirtualInputManager:SendKeyEvent(true, "X", false, game)
                            wait(0.1)
                        end
                        if _G.SkillC then
                            VirtualInputManager:SendKeyEvent(true, "C", false, game)
                            wait(0.1)
                        end
                        if _G.SkillV then
                            VirtualInputManager:SendKeyEvent(true, "V", false, game)
                            wait(0.1)
                        end
                        if _G.SkillF then
                            VirtualInputManager:SendKeyEvent(true, "F", false, game)
                            wait(0.1)
                        end
                    else
                        TweenToPosition(_G.QuestPosition)
                    end
                end
            end)
        end
        if _G.AutoNearestMobs then
            pcall(function()
                EquipWeapon(_G.SelectedWeapon)
                local mob = GetNearestMob()
                if mob then
                    TweenToPosition(mob.HumanoidRootPart.Position)
                end
            end)
        end
    end
end)

-- Settings Tab
SaveManager:SetLibrary(Fluent)
InterfaceManager:SetLibrary(Fluent)
SaveManager:IgnoreThemeSettings()
SaveManager:SetIgnoreIndexes({})
InterfaceManager:SetFolder("FluentScriptHub")
SaveManager:SetFolder("FluentScriptHub/specific-game")
InterfaceManager:BuildInterfaceSection(Tabs.Settings)
SaveManager:BuildConfigSection(Tabs.Settings)

Window:SelectTab(1)
Fluent:Notify({
    Title = "SPACE HUB",
    Content = "Script loaded successfully!",
    Duration = 5
})

SaveManager:LoadAutoloadConfig()
