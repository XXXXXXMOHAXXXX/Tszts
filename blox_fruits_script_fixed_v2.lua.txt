-- Made by AABIS & moha
local Show_Button = true
local Button_Icon = "rbxassetid://135671141026630"
local Button_Transparency = 0.1

-- Create the toggle button
local ScreenGui = Instance.new("ScreenGui")
local ImageButton = Instance.new("ImageButton")
local UICorner = Instance.new("UICorner")
local UIStroke = Instance.new("UIStroke")
local UIGradient = Instance.new("UIGradient")
local UIScale = Instance.new("UIScale")

ScreenGui.Name = "SpaceHubButton"
ScreenGui.Parent = game.CoreGui
ScreenGui.ZIndexBehavior = Enum.ZIndexBehavior.Sibling

ImageButton.Parent = ScreenGui
ImageButton.BackgroundColor3 = Color3.fromRGB(255, 255, 255)
ImageButton.BackgroundTransparency = Button_Transparency
ImageButton.BorderSizePixel = 0
ImageButton.Position = UDim2.new(0.05, 0, 0.1, 0)
ImageButton.Size = UDim2.new(0, 70, 0, 70)
ImageButton.Image = Button_Icon
ImageButton.Draggable = true
ImageButton.ImageTransparency = 0

UICorner.CornerRadius = UDim.new(0, 20)
UICorner.Parent = ImageButton

UIStroke.Parent = ImageButton
UIStroke.Color = Color3.fromRGB(0, 150, 255)
UIStroke.Thickness = 4
UIStroke.ApplyStrokeMode = Enum.ApplyStrokeMode.Border

UIGradient.Parent = ImageButton
UIGradient.Color = ColorSequence.new{
    ColorSequenceKeypoint.new(0, Color3.fromRGB(135, 206, 250)),
    ColorSequenceKeypoint.new(1, Color3.fromRGB(70, 130, 180))
}
UIGradient.Rotation = 45

UIScale.Parent = ImageButton
UIScale.Scale = 1

local function animateButton()
    local tween1 = game:GetService("TweenService"):Create(
        UIScale,
        TweenInfo.new(0.1, Enum.EasingStyle.Quad, Enum.EasingDirection.InOut),
        {Scale = 0.8}
    )
    tween1:Play()
    tween1.Completed:Connect(function()
        local tween2 = game:GetService("TweenService"):Create(
            UIScale,
            TweenInfo.new(0.1, Enum.EasingStyle.Back, Enum.EasingDirection.Out),
            {Scale = 1.1}
        )
        tween2:Play()
        tween2.Completed:Connect(function()
            local tween3 = game:GetService("TweenService"):Create(
                UIScale,
                TweenInfo.new(0.1, Enum.EasingStyle.Quad, Enum.EasingDirection.Out),
                {Scale = 1}
            )
            tween3:Play()
        end)
    end)
end

-- Toggle functionality
local isHidden = false
ImageButton.MouseButton1Click:Connect(function()
    animateButton()
    wait(0.2)
    if isHidden then
        for _, gui in pairs(game.CoreGui:GetChildren()) do
            if gui.Name == "ScreenGui" and gui:FindFirstChild("Frame") then
                gui.Enabled = true
            end
        end
        if Window and Window.Root then
            Window.Root.Visible = true
        end
        isHidden = false
    else
        for _, gui in pairs(game.CoreGui:GetChildren()) do
            if gui.Name == "ScreenGui" and gui:FindFirstChild("Frame") then
                gui.Enabled = false
            end
        end
        if Window and Window.Root then
            Window.Root.Visible = false
        end
        isHidden = true
    end
end)

wait(3)

-- Load the UI library
local Fluent = loadstring(game:HttpGet("https://github.com/dawid-scripts/Fluent/releases/latest/download/main.lua"))()
local SaveManager = loadstring(game:HttpGet("https://raw.githubusercontent.com/dawid-scripts/Fluent/master/Addons/SaveManager.lua"))()
local InterfaceManager = loadstring(game:HttpGet("https://raw.githubusercontent.com/dawid-scripts/Fluent/master/Addons/InterfaceManager.lua"))()

local Window = Fluent:CreateWindow({
    Title = "ENCHANTED HUB | BLOX FRUIT sea 1",
    SubTitle = "Created by AABIS & moha",
    TabWidth = 125,
    Size = UDim2.fromOffset(600, 500),
    Acrylic = true,
    Theme = "Dark",
    MinimizeKey = Enum.KeyCode.LeftControl
})

local Tabs = {
    Main = Window:AddTab({ Title = "Main", Icon = "home" }),
    AutoFarm = Window:AddTab({ Title = "Auto Farm", Icon = "fan" }),
}

-- Get services
local plr = game.Players.LocalPlayer
local char = plr.Character or plr.CharacterAdded:Wait()
local hum = char:WaitForChild("Humanoid")
local hrp = char:WaitForChild("HumanoidRootPart")

-- Variables
getgenv().FastAttack = false
getgenv().BringFruit = false
getgenv().StoreFruit = false
getgenv().AutoLevel = false
getgenv().AutoMaterial = false
getgenv().AutoQuest = false
getgenv().AutoBoss = false
getgenv().SelectedWeapon = ""
getgenv().SelectedQuest = ""
getgenv().SelectedBoss = ""

-- Combat functions
function equipWeapon(toolname)
    if plr.Backpack:FindFirstChild(toolname) then
        hum:EquipTool(plr.Backpack:FindFirstChild(toolname))
    elseif char:FindFirstChild(toolname) then
        -- weapon already equipped
    else
        -- weapon not found
    end
end

function attack()
    if getgenv().FastAttack then
        local weapon = char:FindFirstChildOfClass("Tool")
        if weapon then
            game:GetService("VirtualInputManager"):SendMouseButtonEvent(0, 0, 0, true, game, 1)
            game:GetService("VirtualInputManager"):SendMouseButtonEvent(0, 0, 0, false, game, 1)
        end
    end
end

-- Fruit functions
function collectFruits()
    spawn(function()
        while getgenv().BringFruit do
            for i,v in pairs(workspace:GetChildren()) do
                if string.find(v.Name, "Fruit") and v:FindFirstChild("Handle") then
                    v.Handle.CFrame = hrp.CFrame
                end
            end
            wait(1)
        end
    end)
end

function manageFruits()
    spawn(function()
        while getgenv().StoreFruit do
            local fruits = {}
            for i,v in pairs(plr.Backpack:GetChildren()) do
                if string.find(v.Name, "Fruit") then
                    table.insert(fruits, v)
                end
            end
            
            if #fruits > 1 then
                -- Store fruits logic here
                -- Would need game-specific remotes
            end
            wait(2)
        end
    end)
end

-- Player stats
function getStats()
    local stats = {}
    if plr:FindFirstChild("Data") then
        if plr.Data:FindFirstChild("Level") then
            stats.Level = plr.Data.Level.Value
        end
        if plr.Data:FindFirstChild("Beli") then
            stats.Money = plr.Data.Beli.Value
        end
        if plr.Data:FindFirstChild("Race") then
            stats.Race = plr.Data.Race.Value
        end
    end
    
    if plr:FindFirstChild("leaderstats") then
        if plr.leaderstats:FindFirstChild("Bounty") then
            stats.Bounty = plr.leaderstats.Bounty.Value
        end
    end
    
    return stats
end

-- Farming functions
function farmLevel()
    spawn(function()
        while getgenv().AutoLevel do
            local enemies = {"Bandit", "Monkey", "Gorilla", "Pirate", "Brute", "Desert Bandit", "Desert Officer", "Snow Bandit", "Snowman", "Chief Petty Officer"}
            
            local target = nil
            local closestDist = math.huge
            
            for i,v in pairs(workspace.Enemies:GetChildren()) do
                for j,enemyName in pairs(enemies) do
                    if v.Name == enemyName and v:FindFirstChild("Humanoid") and v.Humanoid.Health > 0 then
                        local dist = (v.HumanoidRootPart.Position - hrp.Position).Magnitude
                        if dist < closestDist then
                            closestDist = dist
                            target = v
                        end
                    end
                end
            end
            
            if target then
                hrp.CFrame = target.HumanoidRootPart.CFrame * CFrame.new(0, 0, 3)
                attack()
            end
            wait(0.1)
        end
    end)
end

function farmMaterials()
    spawn(function()
        while getgenv().AutoMaterial do
            local materialMobs = {"Brute", "Pirate", "Desert Officer"}
            
            for i,v in pairs(workspace.Enemies:GetChildren()) do
                for j,mobName in pairs(materialMobs) do
                    if v.Name == mobName and v:FindFirstChild("Humanoid") and v.Humanoid.Health > 0 then
                        hrp.CFrame = v.HumanoidRootPart.CFrame * CFrame.new(0, 0, 3)
                        attack()
                        break
                    end
                end
            end
            wait(0.1)
        end
    end)
end

function farmBoss()
    spawn(function()
        while getgenv().AutoBoss do
            local boss = workspace.Enemies:FindFirstChild(getgenv().SelectedBoss)
            if boss and boss:FindFirstChild("Humanoid") and boss.Humanoid.Health > 0 then
                hrp.CFrame = boss.HumanoidRootPart.CFrame * CFrame.new(0, 0, 5)
                attack()
            end
            wait(0.1)
        end
    end)
end

-- Main Tab
Tabs.Main:AddSection("Weapon")

local WeaponDropdown = Tabs.Main:AddDropdown("WeaponSelect", {
    Title = "Choose Weapon",
    Values = {"Melee", "Sword", "Blox Fruit", "Gun"},
    Multi = false,
    Default = 1,
})

WeaponDropdown:OnChanged(function(Value)
    getgenv().SelectedWeapon = Value
    if Value == "Melee" then
        equipWeapon("Combat")
    elseif Value == "Sword" then
        equipWeapon("Katana")
    elseif Value == "Blox Fruit" then
        equipWeapon("Rubber")
    elseif Value == "Gun" then
        equipWeapon("Slingshot")
    end
end)

local FastAttackToggle = Tabs.Main:AddToggle("FastAttackToggle", {
    Title = "Fast Attack",
    Default = false
})

FastAttackToggle:OnChanged(function(Value)
    getgenv().FastAttack = Value
end)

-- Fruits Section
Tabs.Main:AddSection("FRUITS")

local BringFruitToggle = Tabs.Main:AddToggle("BringFruitToggle", {
    Title = "Bring Fruit",
    Default = false
})

BringFruitToggle:OnChanged(function(Value)
    getgenv().BringFruit = Value
    if Value then
        collectFruits()
    end
end)

local StoreFruitToggle = Tabs.Main:AddToggle("StoreFruitToggle", {
    Title = "Store Fruit", 
    Default = false
})

StoreFruitToggle:OnChanged(function(Value)
    getgenv().StoreFruit = Value
    if Value then
        manageFruits()
    end
end)

-- Player Stats Section
Tabs.Main:AddSection("PLAYER STATS")

local StatsDisplay = Tabs.Main:AddParagraph({
    Title = "Stats",
    Content = "Loading player stats..."
})

spawn(function()
    while wait(3) do
        local playerStats = getStats()
        local displayText = string.format(
            "Level: %s\nMoney: %s Beli\nRace: %s\nBounty: %s\nSea: 1",
            tostring(playerStats.Level or "?"),
            tostring(playerStats.Money or "?"),
            tostring(playerStats.Race or "Human"),
            tostring(playerStats.Bounty or "0")
        )
        StatsDisplay:SetDesc(displayText)
    end
end)

-- Auto Farm Tab
Tabs.AutoFarm:AddSection("Level Farming")

local AutoLevelToggle = Tabs.AutoFarm:AddToggle("AutoLevelToggle", {
    Title = "Auto Level",
    Default = false
})

AutoLevelToggle:OnChanged(function(Value)
    getgenv().AutoLevel = Value
    if Value then
        farmLevel()
    end
end)

Tabs.AutoFarm:AddSection("Material Farming")

local AutoMaterialToggle = Tabs.AutoFarm:AddToggle("AutoMaterialToggle", {
    Title = "Auto Materials",
    Default = false
})

AutoMaterialToggle:OnChanged(function(Value)
    getgenv().AutoMaterial = Value
    if Value then
        farmMaterials()
    end
end)

Tabs.AutoFarm:AddSection("Quest Farming")

local QuestSelect = Tabs.AutoFarm:AddDropdown("QuestSelect", {
    Title = "Select Quest",
    Values = {"Bandit", "Monkey", "Gorilla", "Pirate", "Brute", "Desert Bandit", "Desert Officer", "Snow Bandit", "Snowman", "Chief Petty Officer"},
    Multi = false,
    Default = 1,
})

QuestSelect:OnChanged(function(Value)
    getgenv().SelectedQuest = Value
end)

local AutoQuestToggle = Tabs.AutoFarm:AddToggle("AutoQuestToggle", {
    Title = "Auto Quest",
    Default = false
})

AutoQuestToggle:OnChanged(function(Value)
    getgenv().AutoQuest = Value
end)

Tabs.AutoFarm:AddSection("Boss Farming")

local BossSelect = Tabs.AutoFarm:AddDropdown("BossSelect", {
    Title = "Select Boss",
    Values = {"The Gorilla King", "Bobby", "Yeti", "Mob Leader", "Vice Admiral", "Warden", "Chief Warden"},
    Multi = false,
    Default = 1,
})

BossSelect:OnChanged(function(Value)
    getgenv().SelectedBoss = Value
end)

local AutoBossToggle = Tabs.AutoFarm:AddToggle("AutoBossToggle", {
    Title = "Auto Boss",
    Default = false
})

AutoBossToggle:OnChanged(function(Value)
    getgenv().AutoBoss = Value
    if Value then
        farmBoss()
    end
end)

-- Save configuration
SaveManager:SetLibrary(Fluent)
InterfaceManager:SetLibrary(Fluent) 
SaveManager:IgnoreThemeSettings()
SaveManager:SetIgnoreIndexes({})
InterfaceManager:SetFolder("FluentScriptHub")
SaveManager:SetFolder("FluentScriptHub/specific-game")

InterfaceManager:BuildInterfaceSection(Tabs.Main)
SaveManager:BuildConfigSection(Tabs.Main)

Window:SelectTab(1)

SaveManager:LoadAutoloadConfig()
